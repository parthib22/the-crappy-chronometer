<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Clock</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
        rel="stylesheet">
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            font-family: "Inter", serif;
            font-optical-sizing: auto;
            font-weight: 500;
            font-style: normal;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        /* Marquee animation */
        .marquee {
            position: absolute;
            width: 100%;
            line-height: 50px;
            background-color: transparent;
            color: white;
            opacity: 0.7;
            white-space: nowrap;
            overflow: hidden;
            box-sizing: border-box;
            z-index: 10;
        }

        .marquee p {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 10s linear infinite;
        }

        @keyframes marquee {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(-100%, 0);
            }
        }

        /* Main container */
        .main-container {
            display: grid;
            place-content: center;
            height: 100vh;
            width: 100vw;
            background-color: rgb(59, 7, 100);
            gap: 1rem;
            padding: 1rem;
        }

        /* Title styles */
        .title-top {
            color: white;
            font-weight: bold;
            text-align: left;
            font-size: 1.5rem;
        }

        .title-bottom {
            color: white;
            font-weight: bold;
            width: 100%;
            text-align: right;
            font-size: 1.5rem;
        }

        /* QR container */
        .qr-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }

        /* QR Code display */
        #qrcode {
            background: white;
            padding: 10px;
            border-radius: 8px;
            mix-blend-mode: lighten;
            min-width: 220px;
            min-height: 220px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Time display */
        .time-display {
            color: white;
            font-size: 1.2rem;
            margin-top: 1rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {

            .title-top,
            .title-bottom {
                font-size: 1.2rem;
            }

            .main-container {
                gap: 0.75rem;
                padding: 0.5rem;
            }
        }
    </style>
</head>

<body>
    <div class="marquee">
        <p>scan to view the time</p>
    </div>

    <main class="main-container">
        <h1 class="title-top">the crappy</h1>
        <div class="qr-container">
            <div id="qrcode">Loading...</div>
            <div class="time-display" id="timeDisplay">--:--:--</div>
        </div>
        <h1 class="title-bottom">chronometer</h1>
    </main>

    <script>
        // Simple QR Code generator using online service as fallback
        function generateQRCodeURL(text) {
            return `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(text)}`;
        }

        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM loaded');
            const qrCodeElement = document.getElementById('qrcode');
            const timeDisplay = document.getElementById('timeDisplay');

            function updateQRCode() {
                const now = new Date();
                const time = now.toLocaleTimeString().toLowerCase();
                console.log('Updating with time:', time);

                // Update the time display
                timeDisplay.textContent = time;

                // Method 1: Try using online QR service
                const img = new Image();
                img.onload = function () {
                    console.log('QR image loaded successfully');
                    qrCodeElement.innerHTML = '';
                    qrCodeElement.appendChild(img);
                };
                img.onerror = function () {
                    console.log('QR image failed to load, using fallback');
                    // Fallback: show time as text
                    qrCodeElement.innerHTML = `<div style="width:200px;height:200px;background:white;color:black;display:flex;align-items:center;justify-content:center;font-size:14px;text-align:center;padding:20px;border-radius:8px;">
                        <div>
                            <div style="font-weight:bold;margin-bottom:10px;">SCAN TO VIEW TIME</div>
                            <div style="font-size:16px;">${time}</div>
                        </div>
                    </div>`;
                };
                img.src = generateQRCodeURL(time);
                img.style.width = '200px';
                img.style.height = '200px';
            }

            // Update immediately
            updateQRCode();

            // Update every second
            setInterval(updateQRCode, 1000);
        });
    </script>
</body>

</html>